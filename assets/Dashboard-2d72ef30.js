import{r as g,u as he,R as b,q as P,c as j,o as de,aa as ie,p as ur,a as mr,e as pr,ab as fr,ac as gr,P as hr,ad as se,Z as Te,$ as Be,E as C,a0 as Le,ae as ue,af as z,ag as R,a6 as k,ah as me,D as E,ai as Fe,aj as pe,ak as fe,al as Z,b as n,j as v,z as be,F as U,am as ve,G as Ue,n as V,an as br,S as vr,Q as yr,a2 as wr,W as _r}from"./index-504f728c.js";import{S as w}from"./SubtleButton-3a1c6638.js";import{I as M,u as oe}from"./use-form-a3812e64.js";import{i as O}from"./is-not-empty-01b37365.js";import{a as x,A as We}from"./Alert-849fc0a0.js";import{u as Pr,T as J}from"./TextInput-8d950d72.js";import{T as xr}from"./Text-cdac94e8.js";import{u as Ge}from"./use-uncontrolled-a3483b05.js";import{A as qe}from"./Button-d49ad8a9.js";import{u as ye,P as Ir}from"./useUsers-9ce45dc3.js";import{P as Sr}from"./Page-7d454ed2.js";import{S as Cr}from"./Separator-c2bce9d2.js";import"./ChevronIcon-9eba7690.js";const He=g.createContext(null),Or=He.Provider,Nr=()=>g.useContext(He);var $r=Object.defineProperty,X=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable,xe=(e,r,a)=>r in e?$r(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Ie=(e,r)=>{for(var a in r||(r={}))Ye.call(r,a)&&xe(e,a,r[a]);if(X)for(var a of X(r))Ke.call(r,a)&&xe(e,a,r[a]);return e},kr=(e,r)=>{var a={};for(var t in e)Ye.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&X)for(var t of X(e))r.indexOf(t)<0&&Ke.call(e,t)&&(a[t]=e[t]);return a};const Er={size:"sm"},Qe=g.forwardRef((e,r)=>{const a=he("CheckboxGroup",Er,e),{children:t,value:f,defaultValue:u,onChange:o,size:l,wrapperProps:i}=a,s=kr(a,["children","value","defaultValue","onChange","size","wrapperProps"]),[c,p]=Ge({value:f,defaultValue:u,finalValue:[],onChange:o}),d=m=>{const h=m.currentTarget.value;p(c.includes(h)?c.filter(y=>y!==h):[...c,h])};return b.createElement(Or,{value:{value:c,onChange:d,size:l}},b.createElement(M.Wrapper,Ie(Ie({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:r},i),s),t))});Qe.displayName="@mantine/core/CheckboxGroup";var jr=Object.defineProperty,ee=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Se=(e,r,a)=>r in e?jr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,ge=(e,r)=>{for(var a in r||(r={}))Ze.call(r,a)&&Se(e,a,r[a]);if(ee)for(var a of ee(r))Je.call(r,a)&&Se(e,a,r[a]);return e},Dr=(e,r)=>{var a={};for(var t in e)Ze.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&ee)for(var t of ee(e))r.indexOf(t)<0&&Je.call(e,t)&&(a[t]=e[t]);return a};function Ar(e){return b.createElement("svg",ge({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),b.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function zr(e){var r=e,{indeterminate:a}=r,t=Dr(r,["indeterminate"]);return a?b.createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},t),b.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):b.createElement(Ar,ge({},t))}var Rr=Object.defineProperty,Mr=Object.defineProperties,Vr=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Tr=Object.prototype.hasOwnProperty,Br=Object.prototype.propertyIsEnumerable,Oe=(e,r,a)=>r in e?Rr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Ne=(e,r)=>{for(var a in r||(r={}))Tr.call(r,a)&&Oe(e,a,r[a]);if(Ce)for(var a of Ce(r))Br.call(r,a)&&Oe(e,a,r[a]);return e},$e=(e,r)=>Mr(e,Vr(r));const Lr={xs:P(16),sm:P(20),md:P(24),lg:P(30),xl:P(36)};var Fr=j((e,{radius:r,color:a,transitionDuration:t,labelPosition:f,error:u,indeterminate:o},{size:l})=>{const i=de({size:l,sizes:Lr}),s=e.fn.variant({variant:"filled",color:a});return{icon:$e(Ne({},e.fn.cover()),{ref:ie("icon"),color:o?"inherit":e.white,transform:o?"none":`translateY(${P(5)}) scale(0.5)`,opacity:o?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${t}ms`,pointerEvents:"none",width:"60%",position:"absolute",zIndex:1,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}),inner:{position:"relative",width:i,height:i,order:f==="left"?2:1},input:$e(Ne({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`${P(1)} solid ${u?e.fn.variant({variant:"filled",color:"red"}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:i,height:i,borderRadius:e.fn.radius(r),padding:0,display:"block",margin:0,transition:`border-color ${t}ms ease, background-color ${t}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:s.background,borderColor:s.background,[`& + .${ie("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${ie("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Ur=Fr;var Wr=Object.defineProperty,Gr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,Yr=Object.prototype.propertyIsEnumerable,Ee=(e,r,a)=>r in e?Wr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Kr=(e,r)=>{for(var a in r||(r={}))Hr.call(r,a)&&Ee(e,a,r[a]);if(ke)for(var a of ke(r))Yr.call(r,a)&&Ee(e,a,r[a]);return e},Qr=(e,r)=>Gr(e,qr(r));const ce={xs:P(16),sm:P(20),md:P(24),lg:P(30),xl:P(36)};var Zr=j((e,{labelPosition:r},{size:a})=>({root:{},body:{display:"flex"},labelWrapper:Qr(Kr({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:a in ce?de({size:a,sizes:e.fontSizes}):void 0,lineHeight:a in ce?de({size:a,sizes:ce}):void 0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:r==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs} / 2)`,[r==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs} / 2)`,[r==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[r==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const Jr=Zr;var Xr=Object.defineProperty,re=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,er=Object.prototype.propertyIsEnumerable,je=(e,r,a)=>r in e?Xr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,ea=(e,r)=>{for(var a in r||(r={}))Xe.call(r,a)&&je(e,a,r[a]);if(re)for(var a of re(r))er.call(r,a)&&je(e,a,r[a]);return e},ra=(e,r)=>{var a={};for(var t in e)Xe.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&re)for(var t of re(e))r.indexOf(t)<0&&er.call(e,t)&&(a[t]=e[t]);return a};const rr=g.forwardRef((e,r)=>{var a=e,{__staticSelector:t,className:f,classNames:u,styles:o,unstyled:l,children:i,label:s,description:c,id:p,disabled:d,error:m,size:h,labelPosition:y,variant:N}=a,$=ra(a,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition","variant"]);const{classes:_,cx:D}=Jr({labelPosition:y},{name:t,styles:o,classNames:u,unstyled:l,variant:N,size:h});return b.createElement(ur,ea({className:D(_.root,f),ref:r},$),b.createElement("div",{className:D(_.body)},i,b.createElement("div",{className:_.labelWrapper},s&&b.createElement("label",{className:_.label,"data-disabled":d||void 0,htmlFor:p},s),c&&b.createElement(M.Description,{className:_.description},c),m&&m!=="boolean"&&b.createElement(M.Error,{className:_.error},m))))});rr.displayName="@mantine/core/InlineInput";var aa=Object.defineProperty,ae=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,tr=Object.prototype.propertyIsEnumerable,De=(e,r,a)=>r in e?aa(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,K=(e,r)=>{for(var a in r||(r={}))ar.call(r,a)&&De(e,a,r[a]);if(ae)for(var a of ae(r))tr.call(r,a)&&De(e,a,r[a]);return e},ta=(e,r)=>{var a={};for(var t in e)ar.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&ae)for(var t of ae(e))r.indexOf(t)<0&&tr.call(e,t)&&(a[t]=e[t]);return a};const na={size:"sm",transitionDuration:100,icon:zr,labelPosition:"right"},we=g.forwardRef((e,r)=>{const a=he("Checkbox",na,e),{className:t,style:f,sx:u,checked:o,disabled:l,color:i,label:s,indeterminate:c,id:p,size:d,radius:m,wrapperProps:h,children:y,classNames:N,styles:$,transitionDuration:_,icon:D,unstyled:T,labelPosition:W,description:le,error:G,variant:B}=a,q=ta(a,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error","variant"]),S=Nr(),I=mr(p),{systemStyles:H,rest:L}=pr(q),{classes:F}=Ur({radius:m,color:i,transitionDuration:_,labelPosition:W,error:!!G,indeterminate:c},{name:"Checkbox",classNames:N,styles:$,unstyled:T,variant:B,size:(S==null?void 0:S.size)||d}),Y=S?{checked:S.value.includes(L.value),onChange:S.onChange}:{};return b.createElement(rr,K(K({className:t,sx:u,style:f,id:I,size:(S==null?void 0:S.size)||d,labelPosition:W,label:s,description:le,error:G,disabled:l,__staticSelector:"Checkbox",classNames:N,styles:$,unstyled:T,"data-checked":Y.checked||void 0,variant:B},H),h),b.createElement("div",{className:F.inner},b.createElement("input",K(K({id:I,ref:r,type:"checkbox",className:F.input,checked:o,disabled:l},L),Y)),b.createElement(D,{indeterminate:c,className:F.icon})))});we.displayName="@mantine/core/Checkbox";we.Group=Qe;var sa=Object.defineProperty,te=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,Ae=(e,r,a)=>r in e?sa(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,ze=(e,r)=>{for(var a in r||(r={}))nr.call(r,a)&&Ae(e,a,r[a]);if(te)for(var a of te(r))sr.call(r,a)&&Ae(e,a,r[a]);return e},oa=(e,r)=>{var a={};for(var t in e)nr.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&te)for(var t of te(e))r.indexOf(t)<0&&sr.call(e,t)&&(a[t]=e[t]);return a};const la={multiple:!1},or=g.forwardRef((e,r)=>{const a=he("FileButton",la,e),{onChange:t,children:f,multiple:u,accept:o,name:l,form:i,resetRef:s,disabled:c,capture:p,inputProps:d}=a,m=oa(a,["onChange","children","multiple","accept","name","form","resetRef","disabled","capture","inputProps"]),h=g.useRef(),y=()=>{!c&&h.current.click()},N=_=>{t(u?Array.from(_.currentTarget.files):_.currentTarget.files[0]||null)};return fr(s,()=>{h.current.value=""}),b.createElement(b.Fragment,null,f(ze({onClick:y},m)),b.createElement("input",ze({style:{display:"none"},type:"file",accept:o,multiple:u,onChange:N,ref:gr(r,h),name:l,form:i,capture:p},d)))});or.displayName="@mantine/core/FileButton";var ia=j(()=>({placeholder:{},input:{cursor:"pointer"}}));const ca=ia;var da=Object.defineProperty,ua=Object.defineProperties,ma=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,lr=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,Re=(e,r,a)=>r in e?da(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,A=(e,r)=>{for(var a in r||(r={}))lr.call(r,a)&&Re(e,a,r[a]);if(ne)for(var a of ne(r))ir.call(r,a)&&Re(e,a,r[a]);return e},Q=(e,r)=>ua(e,ma(r)),pa=(e,r)=>{var a={};for(var t in e)lr.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&ne)for(var t of ne(e))r.indexOf(t)<0&&ir.call(e,t)&&(a[t]=e[t]);return a};const fa=({value:e})=>b.createElement(xr,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Array.isArray(e)?e.map(r=>r.name).join(", "):e==null?void 0:e.name),ga={size:"sm",valueComponent:fa},cr=g.forwardRef((e,r)=>{const a=Pr("FileInput",ga,e),{inputProps:t,wrapperProps:f,placeholder:u,value:o,defaultValue:l,onChange:i,multiple:s,accept:c,name:p,form:d,classNames:m,styles:h,unstyled:y,valueComponent:N,rightSection:$,clearable:_,clearButtonProps:D,readOnly:T,capture:W,fileInputProps:le}=a,G=pa(a,["inputProps","wrapperProps","placeholder","value","defaultValue","onChange","multiple","accept","name","form","classNames","styles","unstyled","valueComponent","rightSection","clearable","clearButtonProps","readOnly","capture","fileInputProps"]),B=g.useRef(),{classes:q,cx:S}=ca(null,{name:"FileInput",classNames:m,styles:h,unstyled:y}),[I,H]=Ge({value:o,defaultValue:l,onChange:i,finalValue:s?[]:null}),L=Array.isArray(I)?I.length!==0:I!==null,F=$||(_&&L&&!T?b.createElement(hr,Q(A({},D),{variant:"transparent",onClick:()=>H(s?[]:null),size:t.size,unstyled:y})):null);return g.useEffect(()=>{(Array.isArray(I)&&I.length===0||I===null)&&B.current()},[I]),b.createElement(M.Wrapper,Q(A({},f),{__staticSelector:"FileInput"}),b.createElement(or,{onChange:H,multiple:s,accept:c,name:p,form:d,resetRef:B,disabled:T,capture:W,inputProps:le},Y=>b.createElement(M,Q(A(A(A({multiline:!0},Y),t),G),{component:"button",type:"button",ref:r,__staticSelector:"FileInput",rightSection:F,classNames:Q(A({},m),{input:S(q.input,m==null?void 0:m.input)})}),L?b.createElement(N,{value:I}):b.createElement(M.Placeholder,{className:q.placeholder},u))))});cr.displayName="@mantine/core/FileInput";const _e=cr;function dr(){const{images:e,setImages:r}=g.useContext(se);return{getImages:async()=>{try{r([]);const u=Te(Be(C,"images"));(await Le(u)).forEach(l=>{r(i=>[...i,l.data()])})}catch{return}},deleteImage:async(u,o)=>{await ue(z(R,`${u}/${o.id}`)),await k(E(C,"images",u),{images:me(o)});let l=[...e];const i=e.findIndex(c=>c.id===u),s=l[i].images.findIndex(c=>c.id===o.id);l[i].images.splice(s,1),r(l)},addImage:async({file:u},o)=>{for(let l=0;l<u.length;l++){const i=Fe(),s=z(R,`${o}/${i}`);await pe(s,u[l]).then(()=>{fe(s).then(async c=>{try{await k(E(C,"images",o),{images:Z({file:c,name:u[l].name.replace(/\.[^.]+/,""),id:i})});let p=[...e];const d=e.findIndex(m=>o===m.id);p[d].images.push({name:u[l].name.replace(/\.[^.]+/,""),file:c,id:i}),r(p)}catch{return}})})}}}}function Me({classes:e,name:r,data:a}){var i,s;const{addImage:t,deleteImage:f}=dr(),[u,o]=g.useState(!1),l=oe({initialValues:{file:null},validate:{file:O()}});return n("div",{className:"dashboard-accordion",children:n(x,{defaultValue:r,variant:"filled",transitionDuration:300,classNames:e,children:v(x.Item,{value:r,children:[n(be,{visible:u}),n(x.Control,{children:r}),n(x.Panel,{children:v("div",{className:"item",children:[v("form",{className:"item-controls",onSubmit:l.onSubmit(async c=>{o(!0),await t(c,r),l.reset(),o(!1)}),children:[n("div",{children:n(_e,{classNames:e,variant:"unstyled",size:"xs",multiple:!0,placeholder:"Choose image ",accept:"image/png,image/jpeg",icon:n(U,{icon:ve}),withAsterisk:!0,...l.getInputProps("file")})}),n(w,{type:"submit",name:"Add",style:{whiteSpace:"nowrap"}})]}),n("div",{className:"item-content",children:((i=a==null?void 0:a.images)==null?void 0:i.length)===0?n(We,{sx:{marginTop:"0.5rem",backgroundColor:"#2e2e2e80",color:"#f53434",borderColor:"#f53434"},icon:n(U,{icon:Ue}),title:"No Images",color:"red",variant:"outline",children:"There are no images yet"}):n(V,{children:(s=a==null?void 0:a.images)==null?void 0:s.map(c=>v("div",{className:"item-item",children:[n(w,{href:c.file,name:c.name}),n("div",{className:"item-item-func",children:n(w,{style:{whiteSpace:"nowrap",maxWidth:"fit-content"},className:"delete",onClick:async()=>{o(!0),await f(r,c),o(!1)},name:"Delete"})})]},c.id))})})]})})]},a==null?void 0:a.id)})})}const ha=j(()=>({chevron:{color:"white"},label:{color:"#bbb"},control:{backgroundColor:"#2e2e2e80","&:hover":{backgroundColor:"#3c3c3c"}},item:{marginBottom:"0.5rem",overflow:"hidden",position:"relative","&[data-active]":{backgroundColor:"#2e2e2e80"}},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},root:{width:"100%"}}));function ba(){const{images:e}=g.useContext(se),{getImages:r}=dr(),{classes:a}=ha();return g.useEffect(()=>{(async()=>{await r()})()},[]),v(V,{children:[n(Me,{classes:a,name:"Gallery",data:e[0]}),n(Me,{classes:a,name:"Slideshow",data:e[1]})]})}function Pe(){const{menus:e,setMenus:r}=g.useContext(se);return{getMenus:async()=>{try{r([]);const o=Te(Be(C,"menus"));(await Le(o)).forEach(i=>{r(s=>[...s,i.data()])})}catch{return}},deleteMenuItem:async(o,l)=>{await ue(z(R,`${o}/${l.id}`)),await k(E(C,"menus",o),{items:me(l)});let i=[...e];const s=e.findIndex(p=>p.id===o.toLowerCase()),c=i[s].items.findIndex(p=>p.id===l.id);i[s].items.splice(c,1),r(i)},addMenuItem:async(o,l,i)=>{const s=Fe(),c=z(R,`${i}/${s}`);await pe(c,l).then(()=>{fe(c).then(async p=>{try{await k(E(C,"menus",i),{items:Z({name:o,file:p,id:s})});let d=[...e];const m=e.findIndex(h=>i.toLowerCase()===h.id);d[m].items.push({name:o,file:p,id:s}),r(d)}catch{return}})})},editMenuItem:async(o,l,i,s)=>{if(await k(E(C,"menus",i),{items:me(s)}),l){const c=z(R,`${i}/${s.id}`);await ue(c),await pe(c,l).then(()=>{fe(c).then(async p=>{try{await k(E(C,"menus",i),{items:Z({name:o||s.name,file:p,id:s.id})});let d=[...e];const m=e.findIndex(y=>y.id===i.toLowerCase()),h=d[m].items.findIndex(y=>y.id===s.id);d[m].items[h]={name:o||s.name,file:p,id:s.id},r(d)}catch(d){return d}})})}else{await k(E(C,"menus",i),{items:Z({name:o||s.name,file:s.file,id:s.id})});let c=[...e];const p=e.findIndex(m=>m.id===i.toLowerCase()),d=c[p].items.findIndex(m=>m.id===s.id);c[p].items[d]={name:o||s.name,id:s.id,file:s.file},r(c)}}}}const va=j(()=>({modal:{backgroundColor:"#000000",boxShadow:"0 0 10px 2px #2e2e2e80",color:"#fffcf1"},root:{"&:hover":{background:"transparent",color:"#fffcf1"}},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},label:{color:"#fffcf1"}}));function ya({isModalOpen:e,setIsModalOpen:r,title:a,currentMenuName:t,currentMenuItem:f}){const{classes:u}=va(),{editMenuItem:o}=Pe(),[l,i]=g.useState(!1),s=z(R,f.file),c=oe({initialValues:{name:"",file:null},validate:{name:(d,m)=>{m.file||O()},file:(d,m)=>{m.name||O()}}}),p=async d=>{i(!0),await o(d.name,d.file,t,f),c.reset(),i(!1),r(!1)};return n(br,{className:"modal",classNames:u,opened:e,title:a,onClose:()=>r(!1),children:v("form",{onSubmit:c.onSubmit(d=>p(d)),children:[n(J,{variant:"unstyled",size:"xs",placeholder:f.name,withAsterisk:!0,classNames:u,...c.getInputProps("name")}),n(_e,{variant:"unstyled",size:"xs",placeholder:s.name,accept:"application/pdf",icon:n(U,{icon:ve}),withAsterisk:!0,classNames:u,...c.getInputProps("file")}),n(qe,{type:"submit",name:"Save",loading:l})]})})}function Ve({classes:e,name:r,data:a}){var h;const{deleteMenuItem:t,addMenuItem:f}=Pe(),[u,o]=g.useState(!1),[l,i]=g.useState(""),[s,c]=g.useState(""),[p,d]=g.useState(!1),m=oe({initialValues:{name:"",file:null},validate:{name:O(),file:O()}});return v(V,{children:[n(ya,{isModalOpen:u,setIsModalOpen:o,currentMenuName:l,currentMenuItem:s,title:"Edit"}),n("div",{className:"catering-menus",children:n(x,{defaultValue:r,variant:"filled",transitionDuration:300,classNames:e,children:v(x.Item,{value:r,children:[n(be,{visible:p}),n(x.Control,{children:r}),n(x.Panel,{children:v("div",{className:"item",children:[v("form",{className:"item-controls",onSubmit:m.onSubmit(async y=>{d(!0),await f(y.name,y.file,r),m.reset(),d(!1)}),children:[v("div",{children:[n(J,{classNames:e,variant:"unstyled",size:"xs",placeholder:"Menu Name",withAsterisk:!0,...m.getInputProps("name")}),n(_e,{classNames:e,variant:"unstyled",size:"xs",placeholder:"Choose menu",accept:"application/pdf",icon:n(U,{icon:ve}),withAsterisk:!0,...m.getInputProps("file")})]}),n(w,{type:"submit",name:"Add",style:{whiteSpace:"nowrap"}})]}),n("div",{className:"item-content",children:(a==null?void 0:a.items.length)===0?n(We,{sx:{marginTop:"0.5rem",backgroundColor:"#2e2e2e80",color:"#f53434",borderColor:"#f53434"},icon:n(U,{icon:Ue}),title:"No Menus",color:"red",variant:"outline",children:"There are no menus yet"}):n(V,{children:(h=a==null?void 0:a.items)==null?void 0:h.map(y=>v("div",{className:"item-item",children:[n("a",{href:y.file,target:"_blank",className:"activeLink",children:y.name}),v("div",{className:"item-item-func",children:[n(w,{onClick:()=>{i(r),c(y),o(!0)},name:"Edit"}),n(w,{className:"delete",onClick:async()=>{d(!0),await t(r,y),d(!1)},name:"Delete"})]})]},y.id))})})]})})]},a==null?void 0:a.id)})})]})}const wa=j(()=>({chevron:{color:"white"},label:{color:"#bbb"},control:{backgroundColor:"#2e2e2e80","&:hover":{backgroundColor:"#3c3c3c"}},item:{marginBottom:"0.5rem",overflow:"hidden",position:"relative","&[data-active]":{backgroundColor:"#2e2e2e80"}},root:{width:"100%"},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}}}));function _a(){const{menus:e}=g.useContext(se),{getMenus:r}=Pe(),{classes:a}=wa();return g.useEffect(()=>{(async()=>{await r()})()},[]),v(V,{children:[n(Ve,{classes:a,name:"Catering",data:e[1]}),n(Ve,{classes:a,name:"Banquets",data:e[0]})]})}function Pa({classes:e,data:r,users:a,setUsers:t,form:f,setEdit:u}){const[o,l]=g.useState(!1),{deleteUserData:i}=ye();return n("div",{className:"dashboard-accordion",children:n(x,{defaultValue:"users",variant:"filled",transitionDuration:300,classNames:e,children:v(x.Item,{value:"users",children:[n(be,{visible:o}),n(x.Control,{children:"Users"}),n(x.Panel,{children:n("div",{className:"item",children:r==null?void 0:r.map(s=>v("div",{className:"item-item",children:[n(w,{name:s.username,style:{whiteSpace:"nowrap"}}),n(w,{name:s.email,style:{whiteSpace:"nowrap",textOverflow:"clip",maxWidth:"50%"}}),v("div",{className:"item-item-func",children:[n(w,{onClick:async()=>{u(!0),f.setValues({username:s.username,email:s.email,oldEmail:s.email})},name:"Edit"}),r.length>1&&n(w,{style:{whiteSpace:"nowrap"},className:"delete",onClick:async()=>{l(!0),await i(s,a,t),l(!1)},name:"Delete"})]})]},s.uid))})})]})})})}const xa=j((e,{edit:r})=>({chevron:{color:"white"},label:{color:"#bbb"},control:{backgroundColor:"#2e2e2e80","&:hover":{backgroundColor:"#3c3c3c"}},item:{marginBottom:"0.5rem",overflow:"hidden",position:"relative","&[data-active]":{backgroundColor:"#2e2e2e80"}},wrapper:{borderWidth:"1px",borderStyle:"solid",borderColor:r?"#5ecd74":"#3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:!r&&"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:!r&&"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},visibilityToggle:{"&:hover":{background:"transparent"}},innerInput:{padding:"1px 2px"}}));function Ia(){const[e,r]=g.useState([]),[a,t]=g.useState(!1),[f,u]=g.useState(!1),[o,l]=g.useState(""),{getUsers:i,createUser:s,updateUser:c}=ye(),{classes:p}=xa({edit:a});g.useEffect(()=>{(async()=>{const h=await i();r(h)})()},[]);const d=oe({initialValues:{username:"",email:"",password:"",customPassword:!1,oldEmail:""},validate:{username:O(),email:O(),password:(m,h)=>{a||O()||h.customPassword||O()}}});return v(V,{children:[n("div",{className:"dashboard-accordion",children:v("form",{className:"dashboard-user-form",onSubmit:d.onSubmit(async m=>{if(u(!0),a){const h=await c(m,e,r);h?l(h):(t(!1),l(""),d.reset()),u(!1)}else{const h=await s(m,e,r);h?l(h):(l(""),d.reset()),u(!1)}}),children:[a&&n("div",{className:"dashboard-editmode",children:v("div",{className:"dashboard-editmode-header",children:[n("p",{children:"Edit mode enabled"}),n(w,{name:"Disable",className:"delete",onClick:()=>{d.setValues({username:"",email:"",oldEmail:""}),t(!1)}})]})}),n(J,{disabled:f,classNames:p,sx:{borderColor:"red"},variant:"unstyled",size:"xs",placeholder:"Username",withAsterisk:!0,...d.getInputProps("username")}),n(J,{disabled:f,classNames:p,variant:"unstyled",size:"xs",placeholder:"Email",withAsterisk:!0,...d.getInputProps("email")}),n(Ir,{disabled:d.values.customPassword||f,classNames:p,variant:"unstyled",size:"xs",placeholder:"Password",withAsterisk:!0,...d.getInputProps("password")}),n(we,{disabled:f,sx:{input:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80"}},label:"Have user create their own password next time they login",...d.getInputProps("customPassword",{type:"checkbox"})}),n(w,{name:o,className:"delete"}),n(qe,{name:"SUBMIT",type:"submit",loading:f})]})}),n(Pa,{classes:p,name:"Users",data:e,users:e,setUsers:r,form:d,setEdit:t})]})}function Va(){const e=vr(),[r,a]=g.useState("menus"),{currentUser:t,setCurrentUser:f}=g.useContext(yr),{getUser:u}=ye();return g.useEffect(()=>{window.scrollTo(0,0);const o=async()=>{if((await u(t.uid)).tempPassword)e("/newpassword");else return};t.uid&&o()},[]),v(Sr,{flex:!0,children:[n("div",{className:"dashboard-content",children:n("div",{className:"dashboard-display",children:n("div",{className:"dashboard-display-inner",children:{menus:n(_a,{}),images:n(ba,{}),users:n(Ia,{})}[r]})})}),n("aside",{className:"dashboard-nav",children:v("div",{children:[n(Cr,{title:"Dashboard"}),v("div",{className:"content",children:[n(w,{style:{cursor:"pointer"},name:"Menus",className:r==="menus"?"activeLink":"",onClick:()=>a("menus")}),n(w,{style:{cursor:"pointer"},name:"Images",className:r==="images"?"activeLink":"",onClick:()=>a("images")}),n(w,{style:{cursor:"pointer"},name:"Users",className:r==="users"?"activeLink":"",onClick:()=>a("users")}),n(w,{style:{cursor:"pointer"},name:"Logout",className:"delete",onClick:()=>{wr(_r),f(null),e("/")}})]})]})})]})}export{Va as default};
