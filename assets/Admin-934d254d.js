import{r as o,Q as b,S as g,j as l,b as s,c as w,V as h,W as S}from"./index-2d913e34.js";import{c as y,a as d,y as v}from"./yup-resolver-d2dedf6a.js";import{A as x}from"./Button-f03928c0.js";import{P}from"./Page-84d3d664.js";import{S as A}from"./Separator-f4bd40e7.js";import{u as I,P as U}from"./useUsers-7f22e712.js";import{u as E}from"./use-form-f364c07a.js";import{T as k}from"./TextInput-4c1be08b.js";import"./use-uncontrolled-4e964c62.js";import"./Text-5d84cb78.js";const q=y().shape({email:d().email("Invalid email").required("Required").label("Email"),password:d().required("Required").label("Password")}),C=w(()=>({label:{color:"#fffcf1"},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},visibilityToggle:{"&:hover":{background:"transparent"}}}));function z(){const[m,e]=o.useState(!1),{classes:i}=C(),{getUser:u}=I(),{currentUser:N,setCurrentUser:c}=o.useContext(b),n=g(),a=E({initialValues:{email:"",password:""},validate:v(q)});o.useEffect(()=>{window.scrollTo(0,0)},[]);const p=({email:r,password:f})=>{e(!0),h(S,r,f).then(async t=>{c(t.user),(await u(t.user.uid)).tempPassword?(e(!1),n("/newpassword")):(e(!1),n("/dashboard"))}).catch(t=>{e(!1)})};return l(P,{children:[s(A,{title:"Admin Login"}),l("form",{onSubmit:a.onSubmit(r=>p(r)),className:"contact-form",children:[s(k,{classNames:i,variant:"unstyled",name:"email",label:"Email",withAsterisk:!0,...a.getInputProps("email")}),s(U,{classNames:i,variant:"unstyled",name:"password",label:"Password",withAsterisk:!0,...a.getInputProps("password")}),s(x,{name:"Login",type:"submit",loading:m})]})]})}export{z as default};
