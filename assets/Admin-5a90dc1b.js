import{r as o,Q as b,S as g,j as l,b as s,c as w,V as h,W as S}from"./index-93f63095.js";import{c as y,a as d,y as v}from"./yup-resolver-b52d0538.js";import{A as x}from"./Button-0890c00d.js";import{P}from"./Page-44646d16.js";import{S as A}from"./Separator-ef107c12.js";import{u as I,P as U}from"./useUsers-c427a3df.js";import{u as E}from"./use-form-c5174bbe.js";import{T as k}from"./TextInput-53df939c.js";import"./use-uncontrolled-60e3455c.js";const q=y().shape({email:d().email("Invalid email").required("Required").label("Email"),password:d().required("Required").label("Password")}),C=w(()=>({label:{color:"#fffcf1"},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},visibilityToggle:{"&:hover":{background:"transparent"}}}));function $(){const[m,e]=o.useState(!1),{classes:i}=C(),{getUser:u}=I(),{currentUser:N,setCurrentUser:c}=o.useContext(b),n=g(),a=E({initialValues:{email:"",password:""},validate:v(q)});o.useEffect(()=>{window.scrollTo(0,0)},[]);const p=({email:r,password:f})=>{e(!0),h(S,r,f).then(async t=>{c(t.user),(await u(t.user.uid)).tempPassword?(e(!1),n("/newpassword")):(e(!1),n("/dashboard"))}).catch(t=>{e(!1)})};return l(P,{children:[s(A,{title:"Admin Login"}),l("form",{onSubmit:a.onSubmit(r=>p(r)),className:"contact-form",children:[s(k,{classNames:i,variant:"unstyled",name:"email",label:"Email",withAsterisk:!0,...a.getInputProps("email")}),s(U,{classNames:i,variant:"unstyled",name:"password",label:"Password",withAsterisk:!0,...a.getInputProps("password")}),s(x,{name:"Login",type:"submit",loading:m})]})]})}export{$ as default};
