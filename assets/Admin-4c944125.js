import{r as a,A as w,q as h,j as d,P as S,d as e,S as y,c as v,s as x,t as P}from"./index-461fd374.js";import{c as A,a as c,y as I}from"./yup-resolver-0975a467.js";import{A as E}from"./Button-e4d90abd.js";import{u as q,a as N,S as U}from"./useUsers-54424057.js";import{T as k}from"./TextInput-bdb3d535.js";import{P as C}from"./PasswordInput-399c27d6.js";const T=A().shape({email:c().email("Invalid email").required("Required").label("Email"),password:c().required("Required").label("Password")}),j=v(()=>({label:{color:"#fffcf1"},wrapper:{border:"1px solid #3c3c3c",backgroundColor:"#2e2e2e80","&:focus":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"},"&:focus-within":{borderWidth:"1px",borderStyle:"solid",borderImage:"linear-gradient(0deg, #b17900 0%, #fdbb2d 60%) 1"}},visibilityToggle:{"&:hover":{background:"transparent"}}}));function $(){const[m,s]=a.useState(!1),[u,i]=a.useState(""),{classes:n}=j(),{getUser:p}=q(),{setCurrentUser:b}=a.useContext(w),l=h(),t=N({initialValues:{email:"",password:""},validate:I(T)});a.useEffect(()=>{window.scrollTo(0,0)},[]);const f=({email:r,password:g})=>{s(!0),x(P,r,g).then(async o=>{b(o.user),i(""),(await p(o.user.uid)).tempPassword?(s(!1),l("/newpassword")):(s(!1),l("/dashboard"))}).catch(o=>{i("Incorrect email or password!"),s(!1)})};return d(S,{children:[e(y,{title:"Admin Login"}),d("form",{onSubmit:t.onSubmit(r=>f(r)),className:"contact-form",children:[e(k,{classNames:n,variant:"unstyled",name:"email",label:"Email",withAsterisk:!0,...t.getInputProps("email")}),e(C,{classNames:n,variant:"unstyled",name:"password",label:"Password",withAsterisk:!0,...t.getInputProps("password")}),e(U,{name:u,className:"delete"}),e(E,{name:"Login",type:"submit",loading:m})]})]})}export{$ as default};
